{% extends "base.html" %}
{% block content %}
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h3">{{ tag.name }}</h1>
    <div class="btn-group">
      <a class="btn btn-outline-secondary btn-sm" href="{% url 'fin_mate:tag-update' tag.pk %}">Edit</a>
      <a class="btn btn-outline-danger btn-sm" href="{% url 'fin_mate:tag-delete' tag.pk %}">Delete</a>
    </div>
  </div>
  <div class="card mb-3">
    <div class="card-body">
      <div class="text-muted">Used in {{ tag.transactions.count }} transaction(s).</div>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table align-middle">
      <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Account</th>
        <th>Category</th>
      </tr>
      </thead>
      <tbody>
      {% for tx in tag.transactions.all %}
        <tr>
          <td>{{ tx.date|date:"Y-m-d" }}</td>
          <td>{{ tx.get_type_display }}</td>
          <td>{{ tx.amount }}</td>
          <td>{{ tx.account.name }}</td>
          <td>{{ tx.category.name }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted">No transactions yet.</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}